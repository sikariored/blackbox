<%= turbo_frame_tag "user-info" do %>
  <div class="center-and-right-column column-title">Информация :
    <div class="title-login"><%= @user.login %></div>
    <button class="close-turbo-frame" data-frame-id="user-info">X</button>
  </div>
  <div class="show-wrapper">
    <div class="show-container">
      <fieldset class="main-user-info info-container">
        <legend>Основная информация</legend>
        <div class="show-item">
          <div>
            <b>ID : </b>
            <%= @user.id %>
          </div>
        </div>

        <div class="show-item">
          <div><b><%= t('.login') %> :</b>
            <% if @user.login.present? %>
              <%= @user.login %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>

        <div class="show-item">
          <div>
            <b>Имя :</b>
            <% if @user.first_name.present? %>
              <%= @user.first_name %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>

        <div class="show-item">
          <div>
            <b>Фамилия :</b>
            <% if @user.last_name.present? %>
              <%= @user.last_name %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>

        <div class="show-item">
          <div><b><%= t(".email") %> :</b>
            <% if @user.email.present? %>
              <%= @user.email %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>

        <div class="show-item">
          <div><b><%= t('.department') %> : </b>
            <% if @user.department.present? %>
              <%= @user.department.name %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>

        <div class="show-item">
          <div><b><%= t('.role') %> :</b>
            <% if @user.role.present? %>
              <% @user = @user.decorate %>
              <%= @user.show_role %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>

        <% if current_user.role.key == "admin" %>
          <div class="show-actions">
            <%= button_to 'Редактировать', edit_user_path(@user), method: :get, data: { turbo_frame: "user-edit" }, class: "btn btn-warning btn-sm" %>
          </div>
        <% else %>
          <% if current_user.can_edit_own_profile? %>
            <div class="show-actions">
              <%= button_to 'Редактировать', edit_user_path(@user), method: :get, data: { turbo_frame: "_top" }, class: "btn btn-warning btn-sm" %>
            </div>
          <% end %>
        <% end %>
      </fieldset>

      <% if @user.credentials.any? %>
        <fieldset class="credentials-wrapper info-container">
          <legend class="credentials-title"><%= t('.credentials') %></legend>
          <div class="credentials-table">
            <% @user.credentials.each do |credential| %>
              <div class="credentials-table-item">
                <div class="credential">
                  <%= I18n.t(".activerecord.attributes.credential.key.#{credential.key}") %>
                </div>
              </div>
            <% end %>
          </div>
        </fieldset>

      <% else %>
        <div style="display: inline">Данные о полномочиях отсутствуют</div>
      <% end %>

      <fieldset class="technical-user-info info-container">
        <legend>Техническая информация</legend>
        <div class="show-item">
          <div><b><%= t('.current_sign_in_ip') %> : </b>
            <% if @user.current_sign_in_ip.present? %>
              <%= @user.current_sign_in_ip %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>
        <div class="show-item">
          <div><b><%= t('.last_sign_in_ip') %> :</b>
            <% if @user.last_sign_in_ip.present? %>
              <%= @user.last_sign_in_ip %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>
      </fieldset>

      <fieldset class="timestamps-user-info info-container">
        <legend>Временные метки</legend>
        <div class="show-item">
          <div><b><%= t('.last_sign_in_at') %> :</b>
            <% if @user.last_sign_in_at.present? %>
              <%= @user.formatted_last_sign_in_at %>
            <% else %>
              <div style="display: inline"><%= t('.no_data') %></div>
            <% end %>
          </div>
        </div>
        <div class="show-item">
          <div><b><%= t('.created_at') %> :</b> <%= @user.formatted_created_at %></div>
        </div>
        <div class="show-item">
          <div><b><%= t('.updated_at') %> :</b> <%= @user.formatted_updated_at %></div>
        </div>
      </fieldset>

    </div>
  </div>
<% end %>