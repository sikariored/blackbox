<%= turbo_frame_tag "right-column" do %>
  <div class="form-wrapper">
    <div class="form-container">


      <% if current_user.can_edit_user? %>

        <%= form_for @user, url: user_path(@user), method: :patch do |f| %>
          <h3>Редактирование : <%= @user.login %></h3>
          <div class="form-field">
            <%= f.label :login %>
            <%= f.text_field :login, autofocus: true %>
          </div>

          <div class="form-field">
            <%= f.label :email %>
            <%= f.email_field :email %>
          </div>

          <% if @user.can_assign_department_to_user? %>
            <div class="form-field">
              <%= f.label :department_id %>
              <%= f.collection_select :department_id, Department.all, :id, :name %>
            </div>
          <% end %>

          <div class="checkbox-table">
            <%= f.collection_check_boxes :credential_ids, Credential.all, :id, :key do |cb| %>
              <div class="checkbox-container">
                <%= cb.label %>
                <%= cb.check_box %>
              </div>
            <% end %>
          </div>


          <div class="form-action">
            <%= f.submit 'Сохранить' %>
          </div>

        <% end %>

      <% else %>

        <%= form_for current_user, url: user_path(current_user), method: :patch do |f| %>
          <div class="form-field">
            <%= f.label :login %>
            <%= f.text_field :login, autofocus: true %>
          </div>

          <div class="form-field">
            <%= f.label :email %>
            <%= f.email_field :email %>
          </div>

          <div class="form-action">
            <%= f.submit 'Сохранить' %>
          </div>

        <% end %>
      <% end %>

    </div>
  </div>
<% end %>
